"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
const fs = require('fs');
const path = require("path");
const hsutil_1 = require("hsutil");
function stat(thePath) {
    return Promise.resolve(thePath)
        .then(realPath)
        .then(thePath => new Promise((resolve, reject) => {
        fs.stat(thePath, (err, stats) => {
            if (err) {
                reject(err);
            }
            else {
                stats.path = thePath;
                resolve(stats);
            }
        });
    }));
}
function lstat(thePath) {
    return Promise.resolve(thePath)
        .then(path.normalize)
        .then(thePath => new Promise((resolve, reject) => {
        fs.lstat(thePath, (err, stats) => {
            if (err) {
                reject(err);
            }
            else {
                stats.path = thePath;
                resolve(stats);
            }
        });
    }));
}
function error(err) {
    const msg = `*** error in fsUtil: ${err}, stack:\n${err.stack}`;
    throw new Error(msg);
}
function realPath(thePath) {
    return new Promise((resolve, reject) => {
        fs.realpath(thePath, (err, resolvedPath) => err ? reject(err) : resolve(resolvedPath));
    })
        .catch(error);
}
exports.realPath = realPath;
function pathExists(thePath) {
    return new Promise((resolve) => {
        stat(thePath).then((stats) => resolve(true)).catch(() => resolve(false));
    });
}
exports.pathExists = pathExists;
function isFile(thePath) {
    return new Promise((resolve) => {
        stat(thePath).then((stats) => resolve(stats.isFile())).catch(() => resolve(false));
    });
}
exports.isFile = isFile;
function isDirectory(thePath) {
    return new Promise((resolve) => {
        stat(thePath).then((stats) => resolve(stats.isDirectory())).catch(() => resolve(false));
    });
}
exports.isDirectory = isDirectory;
function isLink(thePath) {
    return new Promise((resolve) => {
        lstat(thePath).then((stats) => resolve(stats.isSymbolicLink())).catch(() => resolve(false));
    });
}
exports.isLink = isLink;
function mkdirs(thePath) {
    function checkDir(dir) {
        return () => isDirectory(dir)
            .then((exists) => exists ? true :
            new Promise((resolve, reject) => {
                fs.mkdir(dir, (err) => err ? reject(err) : resolve(true));
            }));
    }
    const p = path.normalize(path.resolve(process.cwd(), thePath));
    const i = p.indexOf(process.cwd());
    if (i === 0) {
        const r = path.dirname(p.substr(process.cwd().length + 1));
        let dirs = r.split('/');
        dirs = dirs.map((dir, i) => './' + dirs.slice(0, i + 1).join('/'));
        return hsutil_1.promiseChain(dirs.map(dir => checkDir(dir)))
            .then((results) => {
            results.map((r, i) => {
                if (r) {
                    return true;
                }
                throw `mkdir failed for ${dirs[i]}`;
            });
            return dirs[dirs.length - 1];
        });
    }
    else {
        return Promise.reject(`target '${p}' not inside working directory '${process.cwd()}'`);
    }
}
exports.mkdirs = mkdirs;
function readDir(thePath) {
    return Promise.resolve(thePath)
        .then(realPath)
        .then(thePath => new Promise((resolve, reject) => {
        fs.readdir(thePath, (err, files) => {
            if (err) {
                reject(err);
            }
            else {
                files.path = thePath;
                resolve(files);
            }
        });
    }))
        .catch(error);
}
exports.readDir = readDir;
function readFile(thePath, isText = true) {
    return new Promise((resolve, reject) => {
        let encoding = isText ? 'utf8' : {};
        fs.readFile(thePath, encoding, (err, data) => {
            if (err) {
                reject(err);
            }
            else {
                resolve(data);
            }
        });
    })
        .catch(error);
}
exports.readFile = readFile;
function readTextFile(thePath) {
    return readFile(thePath, true)
        .catch(error);
}
exports.readTextFile = readTextFile;
function readJsonFile(thePath) {
    return readFile(thePath, true)
        .then((data) => (typeof data === 'string') ? JSON.parse(data) : data)
        .catch(error);
}
exports.readJsonFile = readJsonFile;
function writeFile(thePath, content, isText = true) {
    return new Promise((resolve, reject) => {
        var encoding = isText ? 'utf8' : { encoding: null };
        mkdirs(thePath)
            .then(() => fs.writeFile(thePath, content, encoding, (err) => err ? reject(err) : resolve(thePath)));
    })
        .catch(error);
}
exports.writeFile = writeFile;
;
function writeStream(thePath, content) {
    return new Promise((resolve, reject) => {
        let s = fs.createWriteStream(thePath, { flags: 'w', mode: 0o666 });
        s.on('error', (src) => reject(src));
        s.write(content, 'binary', () => resolve(thePath));
        s.end();
    })
        .catch(error);
}
exports.writeStream = writeStream;
function writeTextFile(thePath, content) {
    return writeFile(thePath, content, true)
        .catch(error);
}
exports.writeTextFile = writeTextFile;
;
function writeJsonFile(thePath, obj) {
    return Promise.resolve(obj)
        .then(JSON.stringify)
        .then(data => writeTextFile(thePath, data))
        .catch(error);
}
exports.writeJsonFile = writeJsonFile;
function appendFile(thePath, content, isText = true) {
    return new Promise((resolve, reject) => {
        var encoding = isText ? 'utf8' : { encoding: null };
        fs.appendFile(thePath, content, encoding, (err) => err ? reject(err) : resolve(thePath));
    })
        .then(realPath)
        .catch(error);
}
exports.appendFile = appendFile;
function remove(thePath) {
    return new Promise((resolve, reject) => {
        isDirectory(thePath).then((dir) => {
            dir ? fs.rmdir(thePath, (e) => (e ? reject(e) : resolve(thePath)))
                : fs.unlink(thePath, (e) => (e ? reject(e) : resolve(thePath)));
        });
    })
        .catch(error);
}
exports.remove = remove;
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiZnNVdGlsLmpzIiwic291cmNlUm9vdCI6IiIsInNvdXJjZXMiOlsiLi4vc3JjL2ZzVXRpbC50cyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiOztBQUFBLE1BQU0sRUFBRSxHQUFJLE9BQU8sQ0FBQyxJQUFJLENBQUMsQ0FBQztBQUMxQiw2QkFBNkI7QUFDN0IsbUNBQXNDO0FBdUN0QyxjQUFjLE9BQWM7SUFDM0IsT0FBTyxPQUFPLENBQUMsT0FBTyxDQUFDLE9BQU8sQ0FBQztTQUN2QixJQUFJLENBQUMsUUFBUSxDQUFDO1NBQ3BCLElBQUksQ0FBQyxPQUFPLENBQUMsRUFBRSxDQUFDLElBQUksT0FBTyxDQUFDLENBQUMsT0FBMkIsRUFBRSxNQUFNLEVBQUUsRUFBRTtRQUNwRSxFQUFFLENBQUMsSUFBSSxDQUFDLE9BQU8sRUFBRSxDQUFDLEdBQU8sRUFBRSxLQUFXLEVBQUUsRUFBRTtZQUN6QyxJQUFHLEdBQUcsRUFBRTtnQkFBRSxNQUFNLENBQUMsR0FBRyxDQUFDLENBQUM7YUFBRTtpQkFDbkI7Z0JBQ0osS0FBSyxDQUFDLElBQUksR0FBRyxPQUFPLENBQUM7Z0JBQ3JCLE9BQU8sQ0FBQyxLQUFLLENBQUMsQ0FBQzthQUNmO1FBQ0YsQ0FBQyxDQUFDLENBQUM7SUFDSixDQUFDLENBQUMsQ0FBQyxDQUFDO0FBQ04sQ0FBQztBQUVELGVBQWUsT0FBYztJQUM1QixPQUFPLE9BQU8sQ0FBQyxPQUFPLENBQUMsT0FBTyxDQUFDO1NBQzdCLElBQUksQ0FBQyxJQUFJLENBQUMsU0FBUyxDQUFDO1NBQ3BCLElBQUksQ0FBQyxPQUFPLENBQUMsRUFBRSxDQUFDLElBQUksT0FBTyxDQUFDLENBQUMsT0FBTyxFQUFFLE1BQU0sRUFBRSxFQUFFO1FBQ2hELEVBQUUsQ0FBQyxLQUFLLENBQUMsT0FBTyxFQUFFLENBQUMsR0FBTyxFQUFFLEtBQVMsRUFBRSxFQUFFO1lBQ3hDLElBQUcsR0FBRyxFQUFFO2dCQUFFLE1BQU0sQ0FBQyxHQUFHLENBQUMsQ0FBQzthQUFFO2lCQUNo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